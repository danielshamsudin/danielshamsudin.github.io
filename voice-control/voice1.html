<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="">
      <meta name="author" content="Our Code World">

      <title>Interact with TM-Kun</title>
	  
	  <style>
		body{background-color: #0ec7c8;
		background-image:url("malegif/midle.gif");
		background-position:right;
		background-repeat:no-repeat;
	    background-size:400px 660px;
		  background-attachment: fixed;

		font-family: cursive;
		text-align: left;}
		
		.glow {
			font-size: 40px;
			color: forestgreen;
			text-align: center;
			-webkit-animation: glow 1s ease-in-out infinite alternate;
			-moz-animation: glow 1s ease-in-out infinite alternate;
			animation: glow 1s ease-in-out infinite alternate;
		}
audio { display:none;}

		@-webkit-keyframes glow {
      from {
      text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px seagreen, 0 0 40px seagreen, 0 0 50px seagreen, 0 0 60px seagreen, 0 0 70px seagreen;
      }

      to {
      text-shadow: 0 0 20px #fff, 0 0 30px darkseagreen, 0 0 40px darkseagreen, 0 0 50px darkseagreen, 0 0 60px darkseagreen, 0 0 70px darkseagreen, 0 0 80px seagreen;
      }
    }
		
		footer {
			text-align: center;
		}
	  </style>

      <!-- Don't forget to add artyom to your document in the head tag-->

      <script src="artyom.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  </head>

  <body>
  
    <div style="text-align: center;">
		<h1 class="glow">The Voices</h1>
		<!-- CHARACTER VOICE HERE -->

		<input type="button" name="story" value="View Story" onclick="window.location.href = 'plot2.html';">
	    <input type="button" name="change" value="Change Character" onclick="window.location.href = 'voice.html';">

		<br>
		<br>
		
      <input type="button" onclick="startArtyom()" value="Start voice commands"/><br><br>
      <input type="button" onclick="stopArtyom()" value="Stop listening"/><br>
      <span id="output" style="font-size:20px;color: green;"></span><br>
      <span id="time" style="font-size:35px;color: forestgreen;"></span><br>

      <br><span style="color:white;">You can use the words in white provided to talk to unifi-chan : </span><br><br>
	  
	  <p id="demo" style="color: blue; font-family: Comic Sans MS; font-size: 12pt; cursor:pointer; text-decoration:underline;" onclick="myFunction()">~Click Here To Show/Hide Commands~</p>
	  <p id="test">&nbsp</p>
      <div id="commands-list">

      </div>
      
	  <br>
      
      <div id="voices-item"></div>
	  <div id="load-voices"></div>
    </div>
    <script>
	
    $("#talk-lang").click(function(){
        artyom.say($("#text-content").val());
    });

    $("#select-voice").change(function(){
        var lang = $(this).val();

        artyom.initialize({lang:lang});
    });

    document.getElementById("load-voices").addEventListener("click", function(){
        var voices = artyom.getVoices();
        var html = "";

        voices.forEach(function(voice){
            html += "Voz name : " + voice.name + " con lang : " + voice.lang + "<br>";
        });

        document.getElementById("voices-item").innerHTML = html;
    }, false);
      // Now we add the most important point of the plugin, the commands
      // This library is very flexible and now we will see why :
      // Every command is a literal object
      artyom.addCommands([
        {
          description:"Unifi-kun can talk too, lets say something",
          indexes:["hello","hi"],
          action:function(i){
              // i = the index of the array of indexes option

              if(i == 0){
                //You say : "hello"
                document.getElementById('time').innerHTML = "Hello, nice to meet you!";
				//!!!!!!!!!!!!!!!!!!!!! USE THIS CODE TO CHANGE IMAGE!!!!!!!!!!!!!!!!!!!!!!//
				 document.body.style.backgroundImage = "url('malegif/mbowing.gif')";
				 // !!!!!!to change audio!!!!!//
				 document.getElementById("my-audio").setAttribute('src', 'interactivegame/7.mp3');
                 
				 
              }
			  if(i == 1){
                document.getElementById('time').innerHTML = "Hello, nice to meet you!";
				 document.body.style.backgroundImage = "url('malegif/mbowing.gif')";
				document.getElementById("my-audio").setAttribute('src', 'interactivegame/7.mp3');

              }
          }
        },
		  {
          description:"Unifi-kun can pose too!",
          indexes:["Let's go"],
          action:function(i){
              // i = the index of the array of indexes option

              if(i == 0){
                document.getElementById('time').innerHTML = "You can count on me!";
				document.body.style.backgroundImage = "url('malegif/mcheese.gif')";
				document.getElementById("my-audio").setAttribute('src', 'interactivegame/2.mp3');
              }

          }
        },
		
		  {
          description:"Unifi-kun can walk too!",
          indexes:["Where are you going"],
          action:function(){

                document.getElementById('time').innerHTML = "To find unifi in the maze";
				document.body.style.backgroundImage = "url('malegif/mwalking.gif')";
				document.getElementById("my-audio").setAttribute('src', 'interactivegame/5.mp3');
             
			  

          }
        },
		 {
          description:"Let's take a selfie",
          indexes:["selfie"],
          action:function(){{
                //You say : command
                document.getElementById('time').innerHTML = "Okay sure, let's take a selfie";
								document.body.style.backgroundImage = "url('malegif/mselfie.gif')";
document.getElementById("my-audio").setAttribute('src', 'interactivegame/4.mp3');
				
              }
          }
        },
        {
          description:"Say unifi",
          indexes:["unifi"],
          action:function(i){
			if(i==0){
			document.getElementById('time').innerHTML = "Really, do you know where she is?";
			document.body.style.backgroundImage = "url('malegif/mlookingaround.gif')";
			document.getElementById("my-audio").setAttribute('src', 'interactivegame/1.mp3');
			}
			
          }
        },
		{
          description:"Unifi does not remember anything",
          indexes:["She does not remember you"],
          action:function(){
			document.getElementById('time').innerHTML = "She will remember me once we meet";
			document.body.style.backgroundImage = "url('malegif/mlookingcool.gif')";
			document.getElementById("my-audio").setAttribute('src', 'interactivegame/6.mp3');
          }
        },
        {
          description:"Ask about the time now",
          indexes:['What is the time now'],
          action:function(){
           var currentdate = new Date();
           var datetime = "You want to know the time, here you go: <br>" + currentdate.getDate() + "/"
                + (currentdate.getMonth()+1)  + "/"
                + currentdate.getFullYear() + " @ "
                + currentdate.getHours() + ":"
                + currentdate.getMinutes() + ":"
                + currentdate.getSeconds();
            document.getElementById('time').innerHTML = datetime;
			document.body.style.backgroundImage = "url('malegif/mlookinghand.gif')";
			document.getElementById("my-audio").setAttribute('src', 'interactivegame/3.mp3');
          }
        },
        {
          description:"Unifi will also ask you questions!",
          indexes:["Question"],
          action:function(){
			document.getElementById('time').innerHTML = "What is your preferred internet service provider?<br>(Please record your answer using the button below)";
			document.body.style.backgroundImage = "url('malegif/mlookinghand.gif')";
			document.getElementById("my-audio").setAttribute('src', 'interactivegame/question2.mp3');
          }
        },
      ]);
	  
      // Redirect the recognized text
      artyom.redirectRecognizedTextOutput(function(text,isFinal){
        var span = document.getElementById('output');

        if(isFinal){
          span.innerHTML = '';
        }else {
          span.innerHTML = text;
        }
      });

      function startArtyom(){
        artyom.initialize({
          lang:"en-GB",// More languages are documented in the library
          continuous:false,//if you have https connection, you can activate continuous mode
          debug:true,//Show everything in the console
          listen:true // Start listening when this function is triggered
        });
      }

      function stopArtyom(){
        artyom.fatality();
      }

      window.onload = function (){
	  
          var tab = document.getElementById("commands-list");
          var commands =  artyom.getAvailableCommands();
          var html = '';

		document.getElementById("demo").addEventListener("click", myFunction);

		function myFunction(){
		
		var r = confirm("1.Press OK to see the commands\n2.Press cancel to hide the command lists");
		 
		 if(r == true)
		 {
		  for(var i = 0;i < commands.length;i++){
              var command = commands[i];
              document.getElementById("test").innerHTML = html += command.description + " : <span style='font-size: 12pt; color: white;  text-shadow: 1px 1px 2px white, 0 0 25px blue, 0 0 5px lightyellow;'>"+command.indexes.toString()+"</span><br>";
		 }
		 
		}
		else
		{
		location.reload();
		}
		
		}

      tab.innerHTML = html;
//change here for the default english voice
          artyom.initialize({lang:"en-US"});

        var vocesitas = [
			{lang:"en-US",description: "English(US)"},
			{lang:"en-GB",description: "English(UK)"},
        ];

        vocesitas.forEach(function(voice){
            $('#select-voice').append($('<option>', {value:voice.lang, text:voice.description}));
        });
      };
    </script>
	<!-- CODE TO RECORD USER'S RESPONSE -->
	<br>
	<div style="text-align:center;">
	<p>Please write your answer below TM-kun!</p>
	<textarea rows="5" cols="28">Please Enter Your Answer Here
	</textarea><br>
  <input type="submit" value="Submit answer">
  </div>
  <br><br>
	<footer style="text-align: center;">
			<p>Posted By : Yeo Fu Cheng and Vivian Quek Jia Yi</p>
			<p>Contact Us : <a href="mailto:1181202878@student.mmu.edu.my">Email(Vivian)</a>
			or <a href="mailto:1181201138@student.mmu.edu.my">Email(Yeo)</a></p>
		

			<small>&copy; Copyright 2020, The Voices. All Rights Reserved.</small>
		</footer>
				<audio id="my-audio" controls autoplay>
   <source src="" type="audio/mpeg">
</audio>
<br>
<div style="text-align:center">

<!-- <input type="button" value="Back To Waiting Room" onclick="window.location.href = 'index.php';"/> -->

</div>

  </body>

</html>
